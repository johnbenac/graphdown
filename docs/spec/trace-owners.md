# Trace ownership map

Use this as the “who owns what” index when tagging or auditing tests. Keep requirement prefixes aligned to the folders where the production logic lives and the primary suites that should carry the tags.

| Prefixes | Owning subsystem | Production code (primary) | Tests/checks to tag first | Notes |
| --- | --- | --- | --- | --- |
| GOV-*, P-*, NR-* | Product/spec governance | `SPEC.md` | (manual review) | Philosophy + non-requirements; no runtime hooks. |
| LAYOUT-*, FR-MD-*, EXT-*, TYPE-*, REL-*, VAL-* | Core dataset validity + graph + CLI | `src/core/validateDatasetSnapshot.ts`, `src/core/graph.ts`, `src/core/markdownRecord.ts`, `src/core/wikiLinks.ts`, `src/core/ids.ts`, `src/cli/*` | `apps/web/src/core/validateDatasetSnapshot.test.ts`, `tests/core.*.test.js`, `tests/cli.*`, `apps/web/src/core/markdownRecord.test.ts`, `apps/web/src/state/DatasetContext.test.tsx` | Shared fixtures: `tests/fixtures/*`. Keep CLI + web validators consistent. |
| TYPE-* (schema parsing/rendering) | Web schema parsing and UI schema consumers | `apps/web/src/schema/typeSchema.ts`, UI components consuming schema | `apps/web/src/schema/typeSchema.test.ts`, UI/unit tests that read schema | Split from core validity to avoid noisy ownership; UI-facing behaviors evolve independently. |
| ERR-* | Error surfaces (CLI + web import) | `src/cli/output.ts`, `apps/web/src/import/github/mapGitHubError.ts`, `apps/web/src/state/DatasetContext.tsx` | `tests/cli.output.test.js`, `apps/web/src/state/DatasetContext.test.tsx`, `apps/web/e2e/app.spec.ts` | Assert in both CLI and web; string refactors can regress surfaces even when core logic is stable. |
| GH-* | GitHub importer | `apps/web/src/import/github/parseGitHubUrl.ts`, `apps/web/src/import/github/loadGitHubSnapshot.ts`, `apps/web/src/import/github/mapGitHubError.ts`, `apps/web/src/state/DatasetContext.tsx` | `apps/web/src/import/github/parseGitHubUrl.test.ts`, `apps/web/src/state/DatasetContext.test.tsx`, `apps/web/e2e/app.spec.ts` | Covers URL parsing, default ref, tree/raw fetch, and UI error mapping. |
| EXP-* | Export/import (zip) | `src/core/export.ts`, `src/core/zipSnapshot.ts`, `apps/web/src/export/exportZip.ts`, `apps/web/src/import/readZipSnapshot.ts` | `apps/web/src/export/exportZip.test.ts`, `tests/core.roundtrip.test.js`, `apps/web/src/import/readZipSnapshot.test.ts` | Ensures dataset-only vs whole-repo exports and byte-for-byte preservation. |
| UI-*, UI-RAW-001, NFR-001, NFR-010, NFR-030, NFR-031 | Web UI + persistence/state | `apps/web/src/components/*`, `apps/web/src/routes/*`, `apps/web/src/state/*`, `apps/web/src/persistence/*`, `apps/web/src/storage/*` | `apps/web/src/App.test.tsx`, `apps/web/e2e/app.spec.ts`, future UI/unit suites | Currently largely untagged; add coverage as behaviors stabilize. |
